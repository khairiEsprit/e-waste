<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.control.cell.PropertyValueFactory?>
<?import java.net.URL?>
<AnchorPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.example.ewaste.Controllers.HistoriquePoubelleController"
            prefHeight="600.0" prefWidth="800.0">

    <!-- Styles CSS -->
    <stylesheets>
        <URL value="@../styles/style.css"/>
    </stylesheets>

    <VBox spacing="10" layoutX="50" layoutY="20">
        <!-- Titre -->
        <Label text="Gestion des Événements de Poubelle" style="-fx-font-size: 20px; -fx-font-weight: bold;"/>

        <!-- Champ pour l'ID de la poubelle -->
        <HBox spacing="10">
            <Label text="ID Poubelle:"/>
            <TextField fx:id="poubelleIdField" promptText="Entrez l'ID de la poubelle"/>
            <Button text="Historique" onAction="#handleAfficherHistorique"/>
        </HBox>

        <!-- Filtre par type d'événement -->
        <HBox spacing="10">
            <Label text="Filtrer par Type :"/>
            <ComboBox fx:id="typeFilterComboBox" promptText="Tous les types"/>
        </HBox>

        <!-- Champ pour la quantité de déchets -->
        <HBox spacing="10">
            <Label text="Quantité de Déchets (kg):"/>
            <TextField fx:id="quantiteDechetsField" promptText="Entrez la quantité de déchets"/>
        </HBox>

        <!-- Boutons pour les événements -->
        <HBox spacing="10">
            <Button text="Remplissage" onAction="#handleRemplissageEvent">
                <!--graphic>
                    <ImageView>
                        <Image url="@../assets/fill.png"/>
                    </ImageView>
                </graphic!-->
            </Button>
            <Button text="Vidage" onAction="#handleVidageEvent">
                <!--graphic>
                    <ImageView>
                        <Image url="@../assets/empty.png"/>
                    </ImageView>
                </graphic!-->
            </Button>
            <Button text="Panne" onAction="#handlePanneEvent">
                <!--graphic>
                    <ImageView>
                        <Image url="@../assets/error.png"/>
                    </ImageView>
                </graphic!-->
            </Button>
            <Button text="Réparation" onAction="#handleReparationEvent">
                <!--graphic>
                    <ImageView>
                        <Image url="@../assets/repair.png"/>
                    </ImageView>
                </graphic!-->
            </Button>
        </HBox>

        <!-- Bouton pour l'alerte de remplissage maximal -->
        <Button text="Supprimer" onAction="#handleSupprimer"/>

        <TableView fx:id="historiqueTable" prefHeight="200" prefWidth="700">
            <columns>
                <TableColumn fx:id="idColumn" text="ID" prefWidth="50">
                    <cellValueFactory><PropertyValueFactory property="id"/></cellValueFactory>
                </TableColumn>
                <TableColumn fx:id="idPoubelleColumn" text="ID Poubelle" prefWidth="100">
                    <cellValueFactory><PropertyValueFactory property="id_poubelle"/></cellValueFactory>
                </TableColumn>
                <TableColumn fx:id="dateEvenementColumn" text="Date Événement" prefWidth="150">
                    <cellValueFactory><PropertyValueFactory property="date_evenement"/></cellValueFactory>
                </TableColumn>
                <TableColumn fx:id="typeEvenementColumn" text="Type Événement" prefWidth="100">
                    <cellValueFactory><PropertyValueFactory property="type_evenement"/></cellValueFactory>
                </TableColumn>
                <TableColumn fx:id="descriptionColumn" text="Description" prefWidth="200">
                    <cellValueFactory><PropertyValueFactory property="description"/></cellValueFactory>
                </TableColumn>
                <TableColumn fx:id="quantiteDechetsColumn" text="Quantité Déchets (kg)" prefWidth="100">
                    <cellValueFactory><PropertyValueFactory property="quantite_dechets"/></cellValueFactory>
                </TableColumn>
            </columns>
        </TableView>

        <!-- Boutons pour exporter les données -->
        <HBox spacing="10">
            <Button text="Exporter en CSV" onAction="#handleExportCSV"/>
            <!--Button text="Exporter en PDF" onAction="#handleExportPDF"/-->
        </HBox>

        <!-- Label pour afficher le statut -->
        <Label fx:id="statusLabel" style="-fx-text-fill: green; -fx-font-weight: bold;"/>
    </VBox>

</AnchorPane>